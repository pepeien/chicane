name: Documentation
on:
    push:
        branches: [master]
        paths:
            - 'Includes/Chicane/**.hpp'
            - 'Sources/Chicane/**.cpp'
            - 'Doxyfile'
    workflow_dispatch:
jobs:
    build:
        runs-on: ubuntu-22.04
        permissions:
            contents: write
        steps:
            - name: Setup Checkout
              uses: actions/checkout@v4

            - name: Setup Python
              uses: actions/setup-python@v5.6
              with:
                  python-version: '3.13'

            - name: Build XML
              uses: mattnotmitt/doxygen-action@1.12.0

            - name: Fix permissions
              run: |
                sudo chown -R $USER:$USER .
                chmod -R 755 .

            - name: Build JSON
              run: python Scripts/Documentation.py
